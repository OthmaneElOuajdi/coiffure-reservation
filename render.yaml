services:
  - type: web
    name: coiffure-reservation
    runtime: docker
    repo: https://github.com/OthmaneElOuajdi/coiffure-reservation.git
    branch: main
    # Pas de rootDir car le Dockerfile est Ã  la racine
    dockerfilePath: ./Dockerfile
    dockerContext: ./
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: prod
      - key: DATABASE_URL
        fromDatabase:
          name: coiffure-db
          property: connectionString
      - key: PORT
        value: 8080
    healthCheckPath: /actuator/health
    autoDeploy: true

databases:
  - name: coiffure-db
    databaseName: coiffure_reservation
    user: coiffure_user
    plan: free
