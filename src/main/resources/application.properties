spring.application.name=coiffure-reservation

# =====================================================
# Server Configuration
# =====================================================
server.port=${PORT:8080}

# =====================================================
# Supabase PostgreSQL (Transaction pooler)
# =====================================================
spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=require&preferQueryMode=simple
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}

# =====================================================
# HikariCP (petite empreinte - pool Supabase Nano = 15)
# =====================================================
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=1800000

# =====================================================
# JPA / Hibernate
# =====================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false

# =====================================================
# Flyway (désactivé - utilise Hibernate DDL)
# =====================================================
spring.flyway.enabled=false

# =====================================================
# Stripe Configuration
# =====================================================
stripe.api-key=${STRIPE_API_KEY}
stripe.public-key=${STRIPE_PUBLIC_KEY}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}

# =====================================================
# JWT Configuration
# =====================================================
app.jwt.secret=${JWT_SECRET:mySecretKey123456789012345678901234567890}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:86400000}

# =====================================================
# Frontend Configuration
# =====================================================
app.frontend.url=${FRONTEND_URL:http://localhost:5173}

# =====================================================
# Booking Configuration
# =====================================================
app.booking.slot-interval-minutes=${SLOT_INTERVAL_MINUTES:30}
app.booking.min-advance-hours=${MIN_ADVANCE_HOURS:1}
app.booking.cancellation-hours=${CANCELLATION_HOURS:24}

# =====================================================
# Email Configuration
# =====================================================
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# Désactiver le health check email (évite les timeouts)
management.health.mail.enabled=false

# =====================================================
# API Configuration (OpenAPI/Swagger)
# =====================================================
app.api.version=${API_VERSION:1.0.0}
app.base-url=${BASE_URL:http://localhost:8080}
